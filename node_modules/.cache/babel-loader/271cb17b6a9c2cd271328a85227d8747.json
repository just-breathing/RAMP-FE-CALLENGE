{"ast":null,"code":"import mockData from \"../mock-data.json\";\nconst TRANSACTIONS_PER_PAGE = 5;\nconst data = {\n  employees: mockData.employees,\n  transactions: mockData.transactions\n};\nexport const getEmployees = () => data.employees;\nexport const getTransactionsPaginated = _ref => {\n  let {\n    page\n  } = _ref;\n  console.log(\"Paginated Request : \", data.transactions);\n\n  if (page === null) {\n    throw new Error(\"Page cannot be null\");\n  }\n\n  const start = page * TRANSACTIONS_PER_PAGE;\n  const end = start + TRANSACTIONS_PER_PAGE;\n\n  if (start > data.transactions.length) {\n    throw new Error(`Invalid page ${page}`);\n  }\n\n  const nextPage = end < data.transactions.length ? page + 1 : null;\n  return {\n    nextPage,\n    data: data.transactions.slice(start, end)\n  };\n};\nexport const getTransactionsByEmployee = _ref2 => {\n  let {\n    employeeId\n  } = _ref2;\n\n  if (!employeeId) {\n    throw new Error(\"Employee id cannot be empty\");\n  }\n\n  return data.transactions.filter(transaction => transaction.employee.id === employeeId);\n};\nexport const setTransactionApproval = _ref3 => {\n  let {\n    transactionId,\n    value\n  } = _ref3;\n  const transactionIndex = data.transactions.findIndex(currentTransaction => currentTransaction.id === transactionId);\n\n  if (transactionIndex === -1) {\n    return {\n      success: false\n    };\n  }\n\n  const updatedTransaction = { ...data.transactions[transactionIndex],\n    approved: value\n  };\n  const updatedTransactions = [...data.transactions];\n  updatedTransactions[transactionIndex] = updatedTransaction;\n  data.transactions = updatedTransactions;\n  return {\n    sucess: true,\n    updatedTransaction\n  };\n};","map":{"version":3,"names":["mockData","TRANSACTIONS_PER_PAGE","data","employees","transactions","getEmployees","getTransactionsPaginated","page","console","log","Error","start","end","length","nextPage","slice","getTransactionsByEmployee","employeeId","filter","transaction","employee","id","setTransactionApproval","transactionId","value","transactionIndex","findIndex","currentTransaction","success","updatedTransaction","approved","updatedTransactions","sucess"],"sources":["/Users/sundeeprn/Downloads/ramp-fe-challenge 2/src/utils/requests.ts"],"sourcesContent":["import {\n  PaginatedRequestParams,\n  PaginatedResponse,\n  RequestByEmployeeParams,\n  SetTransactionApprovalParams,\n  Transaction,\n  Employee,\n} from \"./types\"\nimport mockData from \"../mock-data.json\"\n\nconst TRANSACTIONS_PER_PAGE = 5\n\nconst data: { employees: Employee[]; transactions: Transaction[] } = {\n  employees: mockData.employees,\n  transactions: mockData.transactions,\n}\n\nexport const getEmployees = (): Employee[] => data.employees\n\nexport const getTransactionsPaginated = ({\n  page,\n}: PaginatedRequestParams): PaginatedResponse<Transaction[]> => {\n  console.log(\"Paginated Request : \",data.transactions);\n  if (page === null) {\n    throw new Error(\"Page cannot be null\")\n  }\n\n  const start = page * TRANSACTIONS_PER_PAGE\n  const end = start + TRANSACTIONS_PER_PAGE\n\n  if (start > data.transactions.length) {\n    throw new Error(`Invalid page ${page}`)\n  }\n\n  const nextPage = end < data.transactions.length ? page + 1 : null\n\n  return {\n    nextPage,\n    data: data.transactions.slice(start, end),\n  }\n}\n\nexport const getTransactionsByEmployee = ({ employeeId }: RequestByEmployeeParams) => {\n  if (!employeeId) {\n    throw new Error(\"Employee id cannot be empty\")\n  }\n\n  return data.transactions.filter((transaction) => transaction.employee.id === employeeId)\n}\n\nexport const setTransactionApproval = ({ transactionId, value }: SetTransactionApprovalParams) => {\n  const transactionIndex = data.transactions.findIndex(\n    (currentTransaction) => currentTransaction.id === transactionId\n  )\n\n  if (transactionIndex === -1) {\n    return {success:false}\n  }\n\n  const updatedTransaction = {\n    ...data.transactions[transactionIndex],\n    approved: value\n  }\n\n  const updatedTransactions = [...data.transactions]\n  updatedTransactions[transactionIndex] = updatedTransaction\n\n  data.transactions = updatedTransactions\n  return {sucess:true,updatedTransaction}\n}\n"],"mappings":"AAQA,OAAOA,QAAP,MAAqB,mBAArB;AAEA,MAAMC,qBAAqB,GAAG,CAA9B;AAEA,MAAMC,IAA4D,GAAG;EACnEC,SAAS,EAAEH,QAAQ,CAACG,SAD+C;EAEnEC,YAAY,EAAEJ,QAAQ,CAACI;AAF4C,CAArE;AAKA,OAAO,MAAMC,YAAY,GAAG,MAAkBH,IAAI,CAACC,SAA5C;AAEP,OAAO,MAAMG,wBAAwB,GAAG,QAEwB;EAAA,IAFvB;IACvCC;EADuC,CAEuB;EAC9DC,OAAO,CAACC,GAAR,CAAY,sBAAZ,EAAmCP,IAAI,CAACE,YAAxC;;EACA,IAAIG,IAAI,KAAK,IAAb,EAAmB;IACjB,MAAM,IAAIG,KAAJ,CAAU,qBAAV,CAAN;EACD;;EAED,MAAMC,KAAK,GAAGJ,IAAI,GAAGN,qBAArB;EACA,MAAMW,GAAG,GAAGD,KAAK,GAAGV,qBAApB;;EAEA,IAAIU,KAAK,GAAGT,IAAI,CAACE,YAAL,CAAkBS,MAA9B,EAAsC;IACpC,MAAM,IAAIH,KAAJ,CAAW,gBAAeH,IAAK,EAA/B,CAAN;EACD;;EAED,MAAMO,QAAQ,GAAGF,GAAG,GAAGV,IAAI,CAACE,YAAL,CAAkBS,MAAxB,GAAiCN,IAAI,GAAG,CAAxC,GAA4C,IAA7D;EAEA,OAAO;IACLO,QADK;IAELZ,IAAI,EAAEA,IAAI,CAACE,YAAL,CAAkBW,KAAlB,CAAwBJ,KAAxB,EAA+BC,GAA/B;EAFD,CAAP;AAID,CArBM;AAuBP,OAAO,MAAMI,yBAAyB,GAAG,SAA6C;EAAA,IAA5C;IAAEC;EAAF,CAA4C;;EACpF,IAAI,CAACA,UAAL,EAAiB;IACf,MAAM,IAAIP,KAAJ,CAAU,6BAAV,CAAN;EACD;;EAED,OAAOR,IAAI,CAACE,YAAL,CAAkBc,MAAlB,CAA0BC,WAAD,IAAiBA,WAAW,CAACC,QAAZ,CAAqBC,EAArB,KAA4BJ,UAAtE,CAAP;AACD,CANM;AAQP,OAAO,MAAMK,sBAAsB,GAAG,SAA4D;EAAA,IAA3D;IAAEC,aAAF;IAAiBC;EAAjB,CAA2D;EAChG,MAAMC,gBAAgB,GAAGvB,IAAI,CAACE,YAAL,CAAkBsB,SAAlB,CACtBC,kBAAD,IAAwBA,kBAAkB,CAACN,EAAnB,KAA0BE,aAD3B,CAAzB;;EAIA,IAAIE,gBAAgB,KAAK,CAAC,CAA1B,EAA6B;IAC3B,OAAO;MAACG,OAAO,EAAC;IAAT,CAAP;EACD;;EAED,MAAMC,kBAAkB,GAAG,EACzB,GAAG3B,IAAI,CAACE,YAAL,CAAkBqB,gBAAlB,CADsB;IAEzBK,QAAQ,EAAEN;EAFe,CAA3B;EAKA,MAAMO,mBAAmB,GAAG,CAAC,GAAG7B,IAAI,CAACE,YAAT,CAA5B;EACA2B,mBAAmB,CAACN,gBAAD,CAAnB,GAAwCI,kBAAxC;EAEA3B,IAAI,CAACE,YAAL,GAAoB2B,mBAApB;EACA,OAAO;IAACC,MAAM,EAAC,IAAR;IAAaH;EAAb,CAAP;AACD,CAnBM"},"metadata":{},"sourceType":"module"}